"use strict";function Cart(){this._storage=[],this._item={},this._cartId=0}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){var t=document.querySelector(".products-grid");t||console.log("Problem productsGridElem not found");for(var e=function(){for(var t=["Mongo people t-short","Dress","Man's jacket","Women's dress","Women's jacket","Man's suit","Man's trousers","Women's autumn jacket","Man's autumn jacket","Man's costume","Women's costume","Drawstring Shorts","Tank Top","Short-Sleeved T-Shirt","Dip-Back Gothic-Print T-Shirt","Trim Hooded Couple Parka","Striped & Star Print Knit Top","Long-Sleeve Raglan Knit Top","Striped Jogger Pants","Hooded Denim Top","Printed Socks","Short-Sleeve T-Shirt","Slim Fit Pants","Lettering Sweatshirt","Sweatshirt","Hooded Panel Pullover","Knit Top","Pullover"],e={products:[]},a=1;a<9;a++){var r=Math.floor(13+1021*Math.random()),n=t[Math.floor(Math.random()*t.length)],o="img/item-"+Math.floor(21+17*Math.random())+".jpg";e.products.push({id:a,name:n,price:r,url:o})}return e}().products,a="",r="",n=0;n<8;n++){for(var o in e[n])a='\n        <div class="product" data-id='+e[n].id+">\n            <img src="+e[n].url+' alt="items image" class="product__item" width="260" height="280">\n            <div class="product__title">'+e[n].name+'</div>\n            <div class="product__price_accent">\n                &#36;'+e[n].price+"\n            </div>\n        </div>\n        ";r+=a}t.innerHTML=r}(),window.onload=function(){var t=(new Date).getFullYear();document.getElementById("current-year").textContent=t};var CART_URL="http://localhost:3800/cart";Cart.prototype.getCartId=function(){return this._cartId},Cart.prototype.setNextCartId=function(){return this._cartId++},Cart.prototype.resetItem=function(){this._item={}},Cart.prototype.addToStorage=function(t){"object"===(void 0===t?"undefined":_typeof(t))&&this._storage.push(t)},Cart.prototype.headerCartRender=function(){$.get(CART_URL+"/",function(t){if(t){var e=0,a=0,r=0;console.log(t),t.forEach(function(t,n){e=parseInt(t.quantity)*parseFloat(t.price),a+=e,r+=parseInt(t.quantity)}),$(".cart-amount").text("Total amount: "+r),$(".cart-sum").text("Total sum: $"+a)}else console.log("Server not response")})};var cart=new Cart;$(".product").on("click",function(){cart._item.itemId=$(this).attr("data-id"),cart._item.itemName=$(this).find(".product__title").text().trim(),cart._item.itemPrice=$(this).find(".product__price_accent").text().trim().slice(1),cart.setNextCartId(),console.log(cart._item);var t=$("<div>"),e=$("<div>").addClass("fibe-subtitle").text("How much do you want?"),a=$("<div>").addClass("add-form"),r=$("<div>").addClass("minus-btn disable"),n=$("<i>").addClass("fas fa-minus"),o=$("<div>").addClass("plus-btn"),i=$("<i>").addClass("fas fa-plus"),m=$("<input>").addClass("items-to-add-val").attr({name:"quantity",type:"number",min:1,max:50,step:1,value:1});r.append(n),o.append(i),a.append(r).append(m).append(o),t.append(e).append(a),fibe(cart._item.itemName,{text:t,button1:{name:"Cancel"},button2:{name:"Add to cart",action:function(){$.post(CART_URL+"/",{id:cart.getCartId(),itemId:cart._item.itemId,itemName:cart._item.itemName,price:cart._item.itemPrice,quantity:cart._item._currentItemAmount?cart._item._currentItemAmoun:1},function(t){cart.addToStorage(cart._item),cart.resetItem(),cart.headerCartRender();var e=t.itemName,a=$("<span>").text("Added! "),r=$("<div>").append(a).append(t.quantity+" piece`s in cart.");fibe(e,"success",!1,{text:r,button1:{name:"Continue shopping"},button2:{action:function(){window.location="shopping-cart.html"},name:"Make order"}})})}}},!1)}),$("body").on("click",".minus-btn",function(){cart._item._currentItemAmount=Number($(".items-to-add-val").val()),cart._item._currentItemAmount<=1||($(".items-to-add-val").val(cart._item._currentItemAmount-1),cart._item._currentItemAmount--,cart._item._currentItemAmount<=1&&$(".minus-btn").addClass("disable"),cart._item._currentItemAmount<50&&$(".plus-btn").removeClass("disable"))}),$("body").on("click",".plus-btn",function(){cart._item._currentItemAmount=Number($(".items-to-add-val").val()),cart._item._currentItemAmount>=50||($(".items-to-add-val").val(cart._item._currentItemAmount+1),cart._item._currentItemAmount++,cart._item._currentItemAmount>=50&&$(".plus-btn").addClass("disable"),cart._item._currentItemAmount>1&&$(".minus-btn").removeClass("disable"))}),$("body").on("blur",".items-to-add-val",function(){var t=Number($(".items-to-add-val").val());t>=1&&t<=50?(cart._item._currentItemAmount=t,cart._item._currentItemAmount>=50&&$(".plus-btn").addClass("disable"),cart._item._currentItemAmount>1&&$(".minus-btn").removeClass("disable"),cart._item._currentItemAmount<=1&&$(".minus-btn").addClass("disable"),cart._item._currentItemAmount<50&&$(".plus-btn").removeClass("disable")):$(".items-to-add-val").val(1)}),$(".row-order-btn").on("click",function(){window.location="shopping-cart.html"});